\documentclass[11pt]{article}

\usepackage{quiver}
\usepackage{amsmath, amsthm, mathrsfs}
\usepackage[margin = 3cm]{geometry}
\usepackage{enumitem}
\usepackage{csquotes}
\usepackage{stmaryrd}

\newtheorem{theorem}{Theorem}[section]
\newtheorem{proposition}[theorem]{Proposition}
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{corollary}[theorem]{Corollary}
\theoremstyle{definition}
\newtheorem{definition}[theorem]{Definition}
\newtheorem{remark}[theorem]{Remark}
\newtheorem{example}[theorem]{Example}
\newtheorem{exercise}[theorem]{Exercise}

\newcommand{\A}{\mathbf{A}}
\newcommand{\Ani}{\operatorname{Ani}}
\newcommand{\ani}{\mathrm{ani}}
\newcommand{\aug}{\mathrm{aug}}
\newcommand{\C}{\mathcal{C}}
\newcommand{\CAlg}{\mathrm{CAlg}}
\newcommand{\Cart}{\operatorname{Cart}}
\newcommand{\Cat}{\mathrm{Cat}}
\newcommand{\Catinf}{\mathcal{C}\mathrm{at}_{\infty}}
\newcommand{\cc}{\mathrm{cc}}
\newcommand{\Cof}{\mathrm{Cof}}
\newcommand{\colim}{\operatorname*{colim}}
\newcommand{\CRMod}{\mathrm{CRMod}}
\newcommand{\Cut}{\operatorname{Cut}}
\newcommand{\D}{\mathcal{D}}
\newcommand{\Der}{\operatorname{Der}}
\newcommand{\E}{\mathcal{E}}
\newcommand{\Einf}{\mathbb{E}_{\infty}}
\newcommand{\Eq}{\operatorname{Eq}}
\newcommand{\et}{\mathrm{\acute{e}t}}
\newcommand{\FFree}{\mathrm{FFree}}
\newcommand{\Fib}{\mathrm{Fib}}
\newcommand{\for}{\mathrm{for}}
\newcommand{\Fun}{\operatorname{Fun}}
\newcommand{\Grpd}{\mathrm{Grpd}}
\newcommand{\h}{\mathrm{h}}
\newcommand{\heart}{\heartsuit}
\newcommand{\Hom}{\operatorname{Hom}}
\newcommand{\iHom}{\operatorname{\underline{Hom}}}
\newcommand{\Ind}{\operatorname{Ind}}
\newcommand{\J}{\mathcal{J}}
\newcommand{\Kan}{\mathrm{Kan}}
\renewcommand{\L}{\mathbb{L}}
\newcommand{\LSym}{\L\mathrm{Sym}}
\newcommand{\M}{\mathscr{M}}
\newcommand{\Map}{\operatorname{Map}}
\newcommand{\Mod}{\mathrm{Mod}}
\newcommand{\N}{\mathrm{N}}
\newcommand{\Ob}{\operatorname{Ob}}
\newcommand{\op}{\mathrm{op}}
\newcommand{\p}{\mathfrak{p}}
\renewcommand{\P}{\mathcal{P}}
\newcommand{\Poly}{\mathrm{Poly}}
\newcommand{\PrL}{\mathrm{Pr}^{\mathrm{L}}}
\newcommand{\PrR}{\mathrm{Pr}^{\mathrm{R}}}
\newcommand{\pr}{\mathrm{pr}}
\newcommand{\proj}{\mathrm{proj}}
\newcommand{\Q}{\mathbf{Q}}
\newcommand{\QCoh}{\operatorname{QCoh}}
\newcommand{\SCR}{\mathrm{SCR}}
\newcommand{\Set}{\mathrm{Set}}
\newcommand{\Sp}{\mathcal{S}\mathrm{p}}
\newcommand{\Spc}{\mathcal{S}\mathrm{pc}}
\newcommand{\Spec}{\operatorname{Spec}}
\newcommand{\sSet}{\mathrm{sSet}}
\newcommand{\Tor}{\operatorname{Tor}}
\newcommand{\X}{\mathcal{X}}
\newcommand{\Y}{\mathcal{Y}}
\newcommand{\Z}{\mathbf{Z}}


\title{Lecture notes in Derived Algebraic Geometry\\Session 4}
\date{21 February 2025}
\author{Course by F. Binda, notes by E. Hecky}


\begin{document}
\maketitle

The aim of this last session is to finish the construction of the cotangent complex, and to discuss a bit about how to globalize the ring-theoretic construction that were introduced in the previous session.

\section{Square-zero extensions and the cotangent complex}

This section is actually the continuation of the last section of the previous lesson.
Recall that we defined an augmented $A$-algebra $A \oplus M$ for every animated module $M$ over an animated ring $A$, satisfying intuitive basic properties.

\begin{lemma}
    There exists a fiber sequence
    \[
        M \to A \oplus M \to A
    \]
    where the second map is an effective epimorphism, and a commutative diagram of $\infty$-categories
    % https://q.uiver.app/#q=WzAsOCxbMCwwLCJcXEFuaShcXENSTW9kXntcXGhlYXJ0fSkiXSxbMSwwLCJcXEFuaShcXENSTW9kXntcXGhlYXJ0fSkiXSxbMCwxLCJcXENBbGdee1xcYW5pfSJdLFsxLDEsIlxcQ0FsZ157XFxhbml9Il0sWzIsMCwiKEEsIE0pIl0sWzMsMCwiKEEsIDApIl0sWzIsMSwiQSBcXG9wbHVzIE0iXSxbMywxLCJBIl0sWzAsMV0sWzAsMiwiXFxvcGx1cyIsMl0sWzIsM10sWzEsMywiXFxwcl8xIl0sWzQsNiwiIiwwLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoibWFwcyB0byJ9fX1dLFs0LDUsIiIsMix7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Im1hcHMgdG8ifX19XSxbNSw3LCIiLDIseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJtYXBzIHRvIn19fV0sWzYsNywiIiwwLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoibWFwcyB0byJ9fX1dXQ==
    \[\begin{tikzcd}
        {\Ani(\CRMod^{\heart})} & {\Ani(\CRMod^{\heart})} & {(A, M)} & {(A, 0)} \\
        {\CAlg^{\ani}} & {\CAlg^{\ani}} & {A \oplus M} & A
        \arrow[from=1-1, to=1-2]
        \arrow["\oplus"', from=1-1, to=2-1]
        \arrow["{\pr_1}", from=1-2, to=2-2]
        \arrow[maps to, from=1-3, to=1-4]
        \arrow[maps to, from=1-3, to=2-3]
        \arrow[maps to, from=1-4, to=2-4]
        \arrow[from=2-1, to=2-2]
        \arrow[maps to, from=2-3, to=2-4]
    \end{tikzcd}\]
\end{lemma}

Remember that classically, $\Der(A, M) \simeq \Hom_{/A}(A, A \oplus M)$.
This motivates the definition of derivations in the animated context.

\begin{definition}
    Let $(A, M) \in \Ani(\CRMod^{\heart})$.
    Then define
    \[
        \Der(A, M) = \Map_{\CAlg_{/A}^{\ani}}(A, A \oplus M).
    \]
\end{definition}

\begin{remark}
    $A \oplus M$ is a loop space !
    Indeed, there is a pullback square of the form
    % https://q.uiver.app/#q=WzAsNCxbMCwwLCJBIFxcb3BsdXMgTSJdLFsxLDAsIkEiXSxbMCwxLCJBIl0sWzEsMSwiQSBcXG9wbHVzIE1bMV0iXSxbMCwxXSxbMCwyXSxbMiwzXSxbMSwzXSxbMCwzLCIiLDEseyJzdHlsZSI6eyJuYW1lIjoiY29ybmVyIn19XV0=
    \[\begin{tikzcd}
        {A \oplus M} & A \\
        A & {A \oplus M[1]}
        \arrow[from=1-1, to=1-2]
        \arrow[from=1-1, to=2-1]
        \arrow["\lrcorner"{anchor=center, pos=0.125}, draw=none, from=1-1, to=2-2]
        \arrow[from=1-2, to=2-2]
        \arrow[from=2-1, to=2-2]
    \end{tikzcd}\]

    Also, $\Der(A, M)$ is the fiber of the map
    \[
        \Map_{\CAlg^{\ani}}(A, A \oplus M) \to \Map_{\CAlg^{\ani}}(A, A).
    \]
\end{remark}

\begin{proposition}
    The functor
    \[
        \Der(A, -) : \Mod_A \to \Spc
    \]
    is accessible and preserves limits.
    Therefore, it has a left adjoint
    \[
        G : \Spc \to \Mod_A.
    \]
\end{proposition}
\begin{proof}
    For the accessibility, it is enough to observe that $\Map(A, -)$ is accessible since $M \mapsto A \oplus M$ commutes with sifted colimits by design (it is an animation), so it is accessible.

    To show that the functor preserves limits, notice that the forgetful functor $\CAlg_{/A}^{\ani} \to \CAlg^{\ani}$ detects limits, so it is enough to show that if $p : K \to \Mod_A$ is a diagram of $A$-modules, then
    \[
        \Map_{/A}(A[\underline{T}], A \oplus \lim_K p) \simeq \lim_K \Map_{/A}(A[\underline{T}], A \oplus p).
    \]
    Why is this the case ?
    Recall that there is an adjunction :
    \[
        \LSym_{\Z} : \Mod_{\Z}^{\ani} \rightleftarrows \CAlg^{\ani} : \for
    \]
    between the (derived) free symmetric algebra and forgetful functors.
    Apply this adjunction and recall that small limits in $\Mod_A$ commute with $\oplus$ (which is simply the product in $\Mod_A$) to obtain :
    \begin{align*}
        \Map_{\CAlg_{/A}}(A[\underline{T}], A \oplus \lim_K p) &\simeq \Map_{\Mod_A}(A^{\oplus n}, \for(A \oplus \lim_K p))\\
        &\simeq \lim_K \Map_{\Mod_A}(A^{\oplus n}, \for(A \oplus p))\\
        &\simeq \lim_K \Map_{\CAlg_{/A}}(\LSym(A^{\oplus n}) = A[\underline{T}], A \oplus p).
    \end{align*}
\end{proof}

One can now define the cotangent complex.
\begin{definition}
    The \emph{absolute cotangent complex} $\L_A$ is the module $G(\ast)$.
\end{definition}

\begin{remark}
    There is another, spectral way to construct the cotangent complex.
    If $\C$ is a symmetric monoidal stable $\infty$-category, then one can define a functor $G : \CAlg^{\aug}(\C) \to \C$ sending an augmented algebra $f : A \to \mathbf{1}$ to its cofiber.
    There is a theorem stating that $G$\footnote{or more precisely, its Goodwillie derivative} induces an equivalence
    \[
        \partial G : \Sp(\CAlg^{\aug}(\C)) \simeq \Sp(\C) \simeq \C
    \]
    which can be used to define the cotangent complex.
    The advantage of this approach is that it lets us defined $A \oplus M$ for any non-necessarily animated $\Einf$-ring spectrum $A$.
\end{remark}

\begin{theorem}
    The construction $A \mapsto \L_A$ extends to a functor
    \[
        \CAlg^{\ani} \to \Ani(\CRMod^{\heart})
    \]
    sending $f : A \to B$ to $B \otimes_A^{\L} \L_A \to \L_B$.
    If $A$ is a polynomial algebra then $\L_A \simeq \Omega_{A/\Z}$.
\end{theorem}

\begin{definition}
    For an animated ring map $f : A \to B$, its \emph{relative cotangent complex} $\L_{B/A}$ is the cofiber of the map $\L_A \otimes_A^{\L} B \to \L_B$.
\end{definition}

\begin{proposition}
    There is an equivalence
    \[
        \Map_{\Mod_B}(\L_{B/A}, N) \simeq \Map_{\CAlg_{A//B}}(B, B \oplus N).
    \]
\end{proposition}

Define the space $\Der_A(B, N)$ of $A$-linear derivations from $B$ to $N$ to be this space.

\begin{proposition}
    The cotangent complex satisfies the following basic properties :
    \begin{enumerate}
        \item (Base change) If $B \simeq B' \otimes_{A'} A$, then $\L_{B/A} \simeq \L_{B'/A'} \otimes B$ ;
        \item If $A \to B \to C$ is a fiber sequence, then there is a fiber sequence
        \[
            C \otimes_B \L_{B/A} \to \L_{C/A} \to \L_{C/B}\text{ ;}
        \]
        \item For every map $f : A \to B$, there is an associated map $\varepsilon(f) : B \otimes_A \Cof(f) \to \L_{B/A}$.
        We have the following connectivity estimate : if the fiber of $f$ is connective, then the fiber of $\varepsilon(f)$ is 2-connective.
    \end{enumerate}
\end{proposition}

An important \enquote{slogan} in derived algebraic geometry which gives even more importance to this object is the idea that all animated rings can be built from discrete rings with square-zero extensions.

\begin{definition}
    A map $S' \to S$ in $\CAlg^{\ani}$ is a \emph{square-zero extension} if there is an $S$-module $M$ and a derivation $d \in \pi_0 \Map_{/S}(S, S\oplus M[1])$ such that the following square is cartesian :
    % https://q.uiver.app/#q=WzAsNCxbMCwwLCJTJyJdLFsxLDAsIlMiXSxbMCwxLCJTIl0sWzEsMSwiUyBcXG9wbHVzIE1bMV0iXSxbMCwxXSxbMCwyXSxbMSwzLCJkXzAiXSxbMiwzLCJkIiwyXV0=
    \[\begin{tikzcd}
        {S'} & S \\
        S & {S \oplus M[1]}
        \arrow[from=1-1, to=1-2]
        \arrow[from=1-1, to=2-1]
        \arrow["{d_0}", from=1-2, to=2-2]
        \arrow["d"', from=2-1, to=2-2]
    \end{tikzcd}\]
    Here, $d_0$ denotes the trivial derivation $S \to S \oplus M[1]$ which is just the inclusion of the first factor.
\end{definition}

\begin{proposition}[Lurie, DAG]
    Let $M$ be an animated module over $S$.
    If $S'$ is a square-zero extension of $S$ by $M$ and if $R \to S$ is any ring map, then the space of lifts $\Map_{\CAlg_{/S}^{\ani}}(R, S')$ is a torsor under $\Der(R, M)$.
\end{proposition}

Concretely, this means that to get a lift $R \to S'$ in the following diagram
% https://q.uiver.app/#q=WzAsNSxbMCwwLCJSIl0sWzEsMCwiUyciXSxbMiwwLCJTIl0sWzEsMSwiUyJdLFsyLDEsIlMgXFxvcGx1cyBNWzFdIl0sWzEsMl0sWzEsM10sWzAsM10sWzAsMSwiIiwwLHsic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoiZGFzaGVkIn19fV0sWzMsNCwiZCIsMl0sWzIsNCwiZF8wIl0sWzEsNCwiIiwyLHsic3R5bGUiOnsibmFtZSI6ImNvcm5lciJ9fV1d
\[\begin{tikzcd}
	R & {S'} & S \\
	& S & {S \oplus M[1]}
	\arrow[dashed, from=1-1, to=1-2]
	\arrow[from=1-1, to=2-2]
	\arrow[from=1-2, to=1-3]
	\arrow[from=1-2, to=2-2]
	\arrow["\lrcorner"{anchor=center, pos=0.125}, draw=none, from=1-2, to=2-3]
	\arrow["{d_0}", from=1-3, to=2-3]
	\arrow["d"', from=2-2, to=2-3]
\end{tikzcd}\]
it is sufficient and necessary that the derivation $R \to S \xrightarrow{d} S \oplus M[1]$ in $\pi_0 \Der(R, M[1]) = \pi_0 \Map_{\Mod_R}(\L_R, M[1])$ is the trivial derivation.

\begin{example}
    Postnikov towers give rise to square zero extensions !
    Recall that for every $n \geq 0$, there is a functor
    \[
        \tau_{\leqslant n} : \CAlg^{\ani} \to \CAlg^{\ani}.
    \]
    Then $\tau_{\leqslant n} R$ is a square-zero extension of $\tau_{\leqslant n-1} R$ by $(\pi_n R)[n]$, i.e. there is a pullback square :
    % https://q.uiver.app/#q=WzAsNCxbMCwwLCJcXHRhdV97XFxsZXFzbGFudCBufVIiXSxbMSwwLCJcXHRhdV97XFxsZXFzbGFudCBuLTF9UiJdLFswLDEsIlxcdGF1X3tcXGxlcXNsYW50IG4tMX1SIl0sWzEsMSwiXFx0YXVfe1xcbGVxc2xhbnQgbi0xfVIgXFxvcGx1cyAoXFxwaV9uUilbbisxXSJdLFsxLDMsImRfMCJdLFsyLDMsIlxcZXhpc3RzIGQiLDIseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XSxbMCwyXSxbMCwxXSxbMCwzLCIiLDEseyJzdHlsZSI6eyJuYW1lIjoiY29ybmVyIn19XV0=
    \[\begin{tikzcd}
        {\tau_{\leqslant n}R} & {\tau_{\leqslant n-1}R} \\
        {\tau_{\leqslant n-1}R} & {\tau_{\leqslant n-1}R \oplus (\pi_nR)[n+1]}
        \arrow[from=1-1, to=1-2]
        \arrow[from=1-1, to=2-1]
        \arrow["\lrcorner"{anchor=center, pos=0.125}, draw=none, from=1-1, to=2-2]
        \arrow["{d_0}", from=1-2, to=2-2]
        \arrow["{\exists d}"', dashed, from=2-1, to=2-2]
    \end{tikzcd}\]
    This explains the philosophy of derived algebraic geometry, that after passing from varieties to schemes by adding non-reduced points, we pass from schemes to derived schemes by adding finer infinitesimal information.
    This Postnikov construction allows for handy inductive arguments using the cotangent complex.
\end{example}

\end{document}